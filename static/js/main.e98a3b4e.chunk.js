(this.webpackJsonpcovid19dashboard=this.webpackJsonpcovid19dashboard||[]).push([[0],{128:function(e,t,n){},226:function(e,t,n){},228:function(e,t,n){},230:function(e,t,n){},364:function(e,t,n){},367:function(e,t,n){},368:function(e,t,n){},370:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(0),r=n.n(c),o=n(35),s=n.n(o),i=(n(226),n(15)),l=(n(227),n(228),n(211)),d=n(20),j=n(379),u=n(103),b=n(191);function h(){var e=Object(b.a)(["\n  body {\n    background: ",";\n    color: ",";\n  }\n  "]);return h=function(){return e},e}var m=Object(u.b)(h(),(function(e){return e.theme.body}),(function(e){return e.theme.text})),O={body:"#FFF",text:"#101010",toggleBorder:"#FFF",backround:"#363537"},f={body:"#121212",text:"#FAFAFA",toggleBorder:"#6B8096",backround:"#363537"},v=n(385),x=n(377),g=(n(128),n(383)),p=n(372),y=n(123),k=n(110),F=n(111),C=n(87),w=n(124),S=n(206),N=(n(230),{cases:"#FF0000",deaths:"#FFAD05",recovered:"#62FF00"});var I=function(e){var t=e.data;return t.map((function(e){return console.log(e)})),Object(a.jsx)("div",{className:"chart-container",children:Object(a.jsx)(g.a,{width:"100%",height:500,children:Object(a.jsxs)(p.a,{margin:{left:25,right:4},children:[Object(a.jsx)(y.a,{formatter:function(e){return new Intl.NumberFormat("it").format(e)}}),Object(a.jsx)(k.a,{dataKey:"date",allowDuplicatedCategory:!1}),Object(a.jsx)(F.a,{type:"number",dataKey:"number",tickFormatter:function(e){return new Intl.NumberFormat("it").format(e)}}),Object(a.jsx)(C.a,{}),Object(a.jsx)(w.a,{dataKey:"date",stroke:"dark"===e.theme?f.text:"",fill:"dark"===e.theme?f.backround:"#fff"}),t.map((function(e){return Object(a.jsx)(S.a,{type:"monotone",dataKey:"number",data:e.data,name:e.name,dot:!1,stroke:N[e.name]},e.name)}))]})})})},K=n(384),B=function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(K.a,{variant:"light",children:[Object(a.jsx)(K.a.Heading,{children:"I'm loading the data"}),Object(a.jsx)("p",{children:"Please be patient..."})]})})},E=B;function A(e){var t=e.opts,n=Object(c.useState)(e.country),r=Object(i.a)(n,2),o=r[0],s=r[1],l=Object(c.useState)(!1),d=Object(i.a)(l,2),j=d[0],u=d[1],b=Object(c.useState)(void 0),h=Object(i.a)(b,2),m=h[0],O=h[1];return Object(c.useEffect)((function(){e.country!==o&&(s(e.country),u(!1)),j||function(e){e&&fetch("".concat("https://disease.sh","/v3/covid-19/historical/").concat(e,"?lastdays=").concat("all"),{headers:{accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){if(e.timeline&&e.timeline.cases&&e.timeline.deaths&&e.timeline.recovered){for(var t=[],n=0,a=Object.entries(e.timeline);n<a.length;n++){for(var c=Object(i.a)(a[n],2),r=c[0],o=c[1],s={name:r,data:[]},l=0,d=Object.entries(o);l<d.length;l++){var j=Object(i.a)(d[l],2),b=j[0],h=j[1];s.data.push({date:b,number:h})}t.push(s)}u(!0),O(t)}else console.error("Bad format response.")}),(function(e){console.error(e)}))}(e.country)}),[j,o,e.country]),j&&m?Object(a.jsx)("div",{className:"mt-3",children:Object(a.jsx)(I,{data:m.filter((function(e,n){return function(e,n){var a;switch(n){case 0:a=t.cases;break;case 1:a=t.deaths;break;case 2:a=t.recovered}if(a)return e}(e,n)}))})}):Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(B,{})})}var D=r.a.memo(A),L=n(21),T=n(376),P=n(214);n(364);var z=function(e){var t=e.countryData,n=e.toPrint;return console.log(n),Object(a.jsx)("div",{className:"chart-container",children:Object(a.jsx)(g.a,{width:"100%",height:500,children:Object(a.jsxs)(T.a,{margin:{left:25,right:4},data:t,children:[Object(a.jsx)(y.a,{formatter:function(e){return new Intl.NumberFormat("it").format(e)}}),Object(a.jsx)(k.a,{dataKey:"date"}),Object(a.jsx)(F.a,{type:"number",tickFormatter:function(e){return new Intl.NumberFormat("it").format(e)}}),Object(a.jsx)(C.a,{}),Object(a.jsx)(w.a,{dataKey:"date",stroke:"dark"===e.theme?f.text:"",fill:"dark"===e.theme?f.backround:"#fff"}),n.map((function(e){return Object(a.jsx)(P.a,{dataKey:e,name:e,fill:N[e]},e)}))]})})})};function G(e){var t=e.opts,n=Object(c.useState)(e.country),r=Object(i.a)(n,2),o=r[0],s=r[1],l=Object(c.useState)(!1),d=Object(i.a)(l,2),j=d[0],u=d[1],b=Object(c.useState)(void 0),h=Object(i.a)(b,2),m=h[0],O=h[1];return Object(c.useEffect)((function(){e.country!==o&&(s(e.country),u(!1)),j||function(e){e&&fetch("".concat("https://disease.sh","/v3/covid-19/historical/").concat(e,"?lastdays=").concat("all"),{headers:{accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){if(e.timeline&&e.timeline.cases&&e.timeline.deaths&&e.timeline.recovered){for(var t=[],n=0,a=Object.entries(e.timeline);n<a.length;n++){for(var c=Object(i.a)(a[n],2),r=c[0],o=c[1],s={name:r,data:[]},l=0,d=Object.entries(o);l<d.length;l++){var j=Object(i.a)(d[l],2),b=j[0],h=j[1];s.data.push({date:b,number:h})}t.push(s)}t.forEach((function(e){var t,n=0,a=0,c=Object(L.a)(e.data);try{for(c.s();!(t=c.n()).done;){var r=t.value;a=r.number,r.number=r.number-n>0?r.number-n:0,n=a}}catch(o){c.e(o)}finally{c.f()}}));for(var m=t[0].data,f=t[1].data,v=t[2].data,x=[],g=0;g<m.length&&v.length&&f.length;g++){var p={date:m[g].date};p.cases=m[g].number,p.recovered=v[g].number,p.deaths=f[g].number,x.push(p)}t=x,u(!0),O(t)}else console.error("Bad format response.")}),(function(e){console.error(e)}))}(e.country)}),[j,o,e.country]),j&&m?Object(a.jsx)("div",{className:"mt-3",children:Object(a.jsx)(z,{theme:e.theme,countryData:m,toPrint:function(e){var t=[];for(var n in e)e[n]&&t.push(n);return t}(t)})}):Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(B,{})})}var J=r.a.memo(G),M=n(380),H=n(210),R=n(58),U=function(e){var t=Object(c.useState)(e.opts),n=Object(i.a)(t,2),r=n[0],o=n[1],s=function(t){e.changeOpts(t),o(t),console.log(t)};return console.log(e),Object(a.jsx)(M.a,{inline:!0,children:Object(a.jsxs)(M.a.Group,{controlId:"chartsOptions",children:[Object(a.jsx)(M.a.Check,{custom:!0,type:"switch",label:"cases",id:"casesOpt",className:"mr-2",defaultChecked:r.cases,value:r.cases,onChange:function(e){return s(Object(R.a)(Object(R.a)({},r),{},{cases:!r.cases}))}}),Object(a.jsx)(M.a.Check,{custom:!0,type:"switch",label:"deaths",id:"deathsOpt",className:"mr-2",defaultChecked:r.deaths,value:r.deaths,onChange:function(e){return s(Object(R.a)(Object(R.a)({},r),{},{deaths:!r.deaths}))}}),Object(a.jsx)(M.a.Check,{custom:!0,type:"switch",label:"recovered",id:"recoveredOpt",defaultChecked:r.recovered,value:r.recovered,onChange:function(e){console.log(e.target.value),s(Object(R.a)(Object(R.a)({},r),{},{recovered:!r.recovered}))}})]})})},V="Italy";var q=function(e){var t,n=Object(c.useState)(!1),r=Object(i.a)(n,2),o=r[0],s=r[1],l=Object(c.useState)(),d=Object(i.a)(l,2),j=d[0],u=d[1],b=Object(c.useState)(V),h=Object(i.a)(b,2),m=h[0],g=h[1],p=Object(c.useState)({cases:!0,deaths:!0,recovered:!1}),y=Object(i.a)(p,2),k=y[0],F=y[1],C="mt-3 ",w="";return"dark"===e.theme&&(C+="dark-tabs",w+="dark-tab "),Object(c.useEffect)((function(){var e;o||(e="cases",s(!0),fetch("".concat("https://disease.sh","/v3/covid-19/countries").concat(e&&"?sort="+e),{headers:{accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){var t={countries:[]};e.forEach((function(e){t.countries.push(e.country)})),u(t),g(V)}),(function(e){console.error(e)})))}),[o,m]),j&&m?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("style",{type:"text/css",children:"\n            .dark-tabs {\n              background-color: ".concat(f.backround,";\n              color: ").concat(f.text,";\n              border-radius: .25rem;\n              border-color: gray;\n            }\n  \n            .dark-tab {\n              border-radius: .25rem;\n            }\n            .dark-tab, .nav-link.active {\n              color: ").concat(f.text,";\n              \n            }\n  \n            a {\n              color: ").concat("dark"===e.theme?f.text:O.text,"\n            }\n            a:hover {\n              color: ").concat("dark"===e.theme?f.text:O.text,"\n            }\n  \n            .nav-tabs .nav-item.show .nav-link, .nav-tabs .nav-link.active {\n              border-radius: 0.25rem;\n            }\n            ")}),Object(a.jsxs)("div",{className:"flex-container",children:[Object(a.jsx)(M.a,{className:"mt-3",children:Object(a.jsxs)(M.a.Group,{as:M.a.Row,controlId:"country",children:[Object(a.jsx)(M.a.Label,{column:!0,sm:4,children:"Selected Country"}),Object(a.jsx)(H.a,{sm:6,children:Object(a.jsx)(M.a.Control,{as:"select",custom:!0,value:m,defaultValue:V,onChange:function(e){g(e.target.value)},style:"light"===e.theme?{}:{backgroundColor:f.backround,color:f.text,borderColor:"gray"},children:null===j||void 0===j||null===(t=j.countries)||void 0===t?void 0:t.map((function(e){return Object(a.jsx)("option",{value:e,children:e},e)}))})})]})}),Object(a.jsx)(U,{opts:k,changeOpts:F})]}),Object(a.jsxs)(v.a,{defaultActiveKey:"cumulative",id:"dash-tabs",className:C,children:[Object(a.jsx)(x.a,{eventKey:"cumulative",title:"Cumulative",className:w,mountOnEnter:!0,children:Object(a.jsx)(D,{theme:e.theme,country:m,opts:k})}),Object(a.jsx)(x.a,{eventKey:"daily",title:"Daily",className:w,mountOnEnter:!0,children:Object(a.jsx)(J,{theme:e.theme,country:m,opts:k})})]})]}):Object(a.jsx)(E,{})},Q=(n(367),function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h1",{children:"About"}),Object(a.jsx)("h2",{children:"Covid-19 Dashboard"}),Object(a.jsx)("p",{children:"See the current Covid-19 situation."}),Object(a.jsx)("h3",{children:"whoami"}),Object(a.jsxs)("p",{children:["My name is ",Object(a.jsx)("a",{href:"https://lorenzofelletti.github.io",children:"Lorenzo Felletti"})," and I'm a computer engineering student ad the University of Bologna."]}),Object(a.jsxs)("p",{children:["Source code ",Object(a.jsx)("a",{href:"https://github.com/lorenzofelletti/covid19dashboard",children:"here"}),"."]})]})}),W=n(382),X=n(213),Y=n(378),Z=(n(368),function(e){var t=e.basename,n=e.theme,c=e.toggleTheme;return Object(a.jsxs)(W.a,{id:"navigation-bar",collapseOnSelect:!0,sticky:"top",expand:"lg",bg:n,variant:n,children:[Object(a.jsx)(W.a.Brand,{href:"".concat(t),children:Object(a.jsx)("img",{src:"".concat(t,"/logo.gif"),width:"120",height:"40",className:"d-inline-block align-top",alt:"covid19dashboard"})}),Object(a.jsx)(W.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(a.jsxs)(W.a.Collapse,{id:"responsive-navbar-nav",children:[Object(a.jsxs)(X.a,{className:"mr-auto",children:[Object(a.jsx)(X.a.Link,{href:"".concat(t),children:"Dashboard"}),Object(a.jsx)(X.a.Link,{href:"".concat(t,"/#/about"),children:"About"})]}),Object(a.jsx)(M.a,{inline:!0,children:Object(a.jsx)(Y.a,{variant:"light"===n?"dark":"light",onClick:c,children:"Switch Theme"})})]})]})}),$="/covid19dashboard";var _=function(){var e=function(){var e=Object(c.useState)("light"),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),o=Object(i.a)(r,2),s=o[0],l=o[1],d=function(e){window.localStorage.setItem("theme",e),a(e)};return Object(c.useEffect)((function(){var e=window.localStorage.getItem("theme");e?a(e):d("light"),l(!0)}),[]),[n,function(){d("light"===n?"dark":"light")},s]}(),t=Object(i.a)(e,3),n=t[0],r=t[1];return t[2]?Object(a.jsx)(u.a,{theme:"light"===n?O:f,children:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(m,{}),Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)(l.a,{basename:$,children:[Object(a.jsx)(Z,{basename:$,theme:n,toggleTheme:r}),Object(a.jsx)(j.a,{children:Object(a.jsxs)(d.c,{children:[Object(a.jsx)(d.a,{exact:!0,path:"/",children:Object(a.jsx)(q,{theme:n})}),Object(a.jsx)(d.a,{path:"/about",children:Object(a.jsx)(Q,{theme:n})})]})})]})})]})}):Object(a.jsx)("div",{})},ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,386)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(_,{})}),document.getElementById("root")),ee()}},[[370,1,2]]]);
//# sourceMappingURL=main.e98a3b4e.chunk.js.map